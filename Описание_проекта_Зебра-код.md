## Описание

Проект представляет собой веб-сервис по обработке штрих и QR кодов с платёжных квитанций различных поставщиков услуг (ЖКУ, телефония, интернет и т.д.).

## Задачи проекта

- Сканирование и распознавание информации с изображения штрих или QR на платёжных квитанциях.
- Хранение распознанной информации для последующего анализа и формирования отчётов для поставщиков услуг.
- Формирование отчётов для поставщиков услуг согласно заданному формату (документ PDF, XLSX, TXT, JSON и т.д.) и критериям


## Пользователи

В проекте предполагаются три типа пользователей (ролей):

### Оператор пункта приёма платежей

**Оператор пункта приёма платежей** передаёт информацию с квитанции **потребителя услуг** от одного или нескольких **поставщиков услуг** путём сканирования штрих или QR кода, для дальнейшей обработки. За каждым оператором пункта приёма платежей закреплён один **пункт приёма платежей**. К одному **пункту приёма платежей** может относиться несколько операторов. 

### Оператор отчётов

**Оператор отчётов** на основании полученной информации от **Оператора пункта приёма платежей** формирует отчёт для **поставщика услуг** 

### Администратор системы

**Администратор системы** имеет возможность:
- добавлять/удалять/модифицировать информацию о **поставщиках услуг**
- добавлять/удалять/модифицировать информацию об **операторах пунктов приёма платежей**
- добавлять/удалять/модифицировать информацию об **операторах отчётов**
-  добавлять/удалять/модифицировать информацию о **пунктах приёма платежей**

## Модули проекта

### Модуль авторизации

**Пользователи системы** получают доступ в системе после прохождения авторизации. Каждый тип пользователей имеет доступ только к функционалу соответствующему своим обязанностям. 

### Хранилище

Одна или несколько БД, хранящая в себе:
- информацию с обработанных **Оператором пункта приёма платежей** квитанций
- информацию о пользователях системы
- информацию о поставщиках услуг в объёме необходимом для работы системы
- информацию о предоставленных отчётах

### Модуль распознавания штрих и QR кодов

Модуль содержит в себе алгоритм распознавания и разбора поступившей от **оператора пункта приёма платежей** информации из штрих или QR кода согласно критериям **поставщика услуг** о структуре кода. 

### Модуль формирования отчётов

Модуль содержит в себе механизм формирования отчёта согласно договорённости с **поставщиком услуг**.

### Интерфейс оператора пункта приёма платежей

Интерфейс, посредством которого **оператором пункта приёма платежей** передаётся информация из штрих или QR кода в **Модуль распознавания штрих и QR кодов**. Так же интерфейс предоставляет возможность получить информацию об уже переданных данных и их статусе в соответствии по одному или нескольким критериям:
- период сканирования
- поставщик услуги
- идентификатор платежа с квитанции

### Интерфейс оператора отчётов

Интерфейс, посредством которого **Оператор отчётов** формирует запрос по отчёту для **поставщиков услуг** согласно заданным критериям и формату.

### Интерфейс администратора системы

Интерфейс, посредством которого **Администратор системы** может работать с информацией о **поставщиках услуг**, **операторах пунктов приёма платежей**, **операторах отчётов**, **пунктах приёма платежей**


### Иные модули системы

Дополнительные модули системы необходимые для обеспечения работоспособности системы на усмотрение разработчика.


## Основной функционал системы

### 1. Администратор

Администратор имеет выданный ему идентификатор в системе и может авторизоваться в системе для выполнения следующих обязанностей.

#### 1.1 Добавление/изменение/удаление пользователя в системе

##### 1.1.1 Добавление 
**Администратор системы** через интерфейс добавляет в систему пользователя одного из прописанных в системе **типов пользователей**, выдав пользователю соответствующие права для исполнения своих функций.

После добавления в систему новый пользователь с помощью выданного идентификатора сможет получить доступ до интерфейса соответствующего своей роли для исполнения своих обязанностей.

##### 1.1.2 Изменение
**Администратор системы** через интерфейс может изменить информацию о пользователе системы:
-  идентификаторы для входа в систему
-  расширить или сузить набор прав для доступа к той или иной части системы в соответствии с обязанностями пользователя
- прочая информация о пользователе в системе

##### 1.1.3 Удаление
**Администратор системы** через интерфейс может удалить информацию о пользователе системы. Например, отозвать доступ пользователя к системе.

#### 1.2 Добавление/изменение/удаление информации о поставщиках услуг

##### 1.2.1 Добавление информации о поставщике услуг

**Администратор системы** через интерфейс добавляет в систему информации о новом поставщике услуг как то:
- реквизиты (ИНН, расчётный счёт)
- прочая информация необходимая для функционирования системы

##### 1.2.2 Изменение
**Администратор системы** через интерфейс изменяет в системе информации об известном системе поставщике услуг при необходимости.

##### 1.2.3 Удаление
**Администратор системы** через интерфейс удаляет из системы информацию о поставщике услуг, если взаимодействие с данным поставщиком приостанавливается 

#### 1.3 Добавление/изменение/удаление информации о пунктах приёма платежей

**Администратор системы** через интерфейс добавляет/изменяет/удаляет в систему информации о **пунктах приёма платежей** закреплённых за операторами пункта приёма платежей.

### 2. Оператор пункта приёма платежей

Оператор пункта приёма платежей имеет выданный ему идентификатор в системе и может авторизоваться для выполнения следующих обязанностей

#### 2.1 Внесение информации с платёжной квитанции

Оператор пункта приёма платежей вручную или посредством камеры считывает информацию штрих или QR кода с платёжной квитанции одного из известных системе поставщиков услуг для последующей обработки в **модуле распознавания** и передачи информации в **хранилище**. В случае ручного ввода - информация минует этап **распознавания**.

### 2.2 Просмотр истории по переданным данным

У оператора пункта приёма платежей должна быть возможность просмотра переданных ранее данных и их статус, например в случае обращения потребителя услуги для подтверждения факта оплаты по квитанции.

### 3. Оператор отчётов

Оператор отчётов имеет выданный ему идентификатор в системе и может авторизоваться для выполнения следующих обязанностей.

#### 3.1 Предварительный просмотр данных для отчёта

Перед тем как формировать отчёт оператор должен иметь возможность через интерфейс сделать запрос для выгрузки информации переданной операторами пунктов приёма платежей согласно желаемым критериям для анализа и в последствии формирования отчёта согласно критериям поставщика услуг.

#### 3.2 Формирование отчёта

Оператор должен иметь возможность сформировать отчёт согласно критериям заявленным поставщиком услуги и в требуемом формате.

Критериями могут выступать:
- период
- регион/город

А так же должна быть возможность формировать общий отчёт с группировкой по заданным критериям.



## Текущие требования

### Пункты приёма платежей

Есть 4 пункта приёма платежей: 2 в Москве, 1 в Казани, 1 во Владивосток
В перспективе количество пунктов приёма платежей будет увеличиваться.

### Поставщики услуг

Заключены договора с 3 поставщиками услуг

#### NN-Телеком

Поставщик услуг телефонии и интернет.

##### Локации предоставления услуг

Нижегородская обл., г. Нижний Новгород

##### Текущие реквизиты
Расчётный счёт `3828576771`  
ИНН `5611680424`

##### Формат штрихкода

`05945{{account}}{{period}}{{billId}}{{amount}}`
, где:

- `account` - цифровой идентификатор лицевого счёта потребителя. Длина **10** цифровых символов
- `period` - период предоставляемой услуги. Формат `YYYYMM`
- `billId` - цифровой идентификатор платежной квитанции. Длина **12** цифровых символов.
- `amount` - идентификатор суммы к оплате. Длина **7** цифровых символов. Последние 2 цифры означают копейки.

##### Формат отчётов

- Ежемесячный в разрезе по лицевым счетам потребителей: лицевой счёт, оплачиваемый период, сумма платежа. Отчёт рассчитывается с 10 числа предыдущего месяца по 10 число текущего месяца. В конце отчёта должна быть указана итоговая сумма по выбранным данным.
- Годовой отчёт в разрезе месяцев: месяц, сумма оплаты за месяц. Отчёт рассчитывается с 1 января по 31 декабря прошедшего года. В конце отчёта должна быть указана итоговая сумма по выбранным данным.

Тип документов отчётов XLSX таблица.


#### ООО 'EasterThanEast'

Поставщик ЖКУ.

##### Локации предоставления услуг

Приморский край, Владивостокский городской округ, г. Владивосток

##### Текущие реквизиты
Расчётный счёт `4543478518`  
ИНН `4786017140`

##### Формат штрихкода

`05335{{account}}{{billId}}{{amount}}`
, где:

- `account` - цифровой идентификатор лицевого счёта потребителя. Длина **6** цифровых символов
- `billId` - цифровой идентификатор платежной квитанции. Длина **10** цифровых символов.
- `amount` - идентификатор суммы к оплате. Длина **7** цифровых символов. Последние 2 цифры означают копейки.

##### Формат QR-кода

`rs={{rs}}|inn={{inn}}|comp={{compName}}|persAccount={{account}}|bill={{billId}}|amount={{amount}}`
, где:
- `rs` - расчётный счёт
- `inn` - ИНН
- `comp` - наименование компании. `ООО 'EasterThanEast'`
- `persAccount` - цифровой идентификатор лицевого счёта потребителя. Длина **6** цифровых символов
- `bill` - цифровой идентификатор платежной квитанции. Длина **10** цифровых символов.
- `amount` - идентификатор суммы к оплате. Длина **7** цифровых символов. Последние 2 цифры означают копейки.

##### Формат отчётов

- Ежемесячный в разрезе по лицевым счетам потребителей: лицевой счёт, сумма платежа. Отчёт рассчитывается с 10 числа предыдущего месяца по 10 число текущего месяца. В конце отчёта должна быть указана итоговая сумма по выбранным данным.
- Годовой отчёт в разрезе месяцев: месяц, сумма оплаты за месяц. Отчёт рассчитывается с 1 января по 31 декабря прошедшего года. В конце отчёта должна быть указана итоговая сумма по выбранным данным.

Тип документов отчётов XLSX таблица.


#### ОАО 'Топка'

Поставщик ЖКУ(горячая вода и отопление).

##### Локации предоставления услуг

- Приморский край, Владивостокский городской округ, г. Владивосток
- г. Москва

##### Текущие реквизиты
Расчётный счёт `1645224760`  
ИНН `4530252357`

##### Формат QR-кода

`org={{compName}};;compInn={{inn}};;period={{period}};;compBankAccount={{rs}};;billId={{billId}};;clientAccount={{account}};;sum={{amount}};;`

, где:
- `compBankAccount` - расчётный счёт
- `compInn` - ИНН
- `org` - наименование компании. `ОАО 'Топка'`
- `clientAccount` - цифровой идентификатор лицевого счёта потребителя. Длина **11** цифровых символов
- `billId` - цифровой идентификатор платежной квитанции. Длина **12** цифровых символов.
- `period` - период предоставляемой услуги. Формат `YYYYMM`
- `sum` - идентификатор суммы к оплате. Длина **10** цифровых символов. Последние 2 цифры означают копейки.

##### Формат отчётов

- Ежемесячный в разрезе по лицевым счетам потребителей: лицевой счёт, оплачиваемый период, сумма платежа. Отчёт рассчитывается с 10 числа предыдущего месяца по 10 число текущего месяца. В конце отчёта должна быть указана итоговая сумма по выбранным данным.
- Годовой отчёт в разрезе месяцев: месяц, сумма оплаты за месяц. Отчёт рассчитывается с 1 января по 31 декабря прошедшего года. В конце отчёта должна быть указана итоговая сумма по выбранным данным.

Тип документов отчётов XLSX таблица.





